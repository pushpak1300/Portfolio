import{l as k,$ as h,a0 as v,B as S,A as T,a1 as E,Z as C,z as m}from"./entry.pk2dmfKj.js";import{i as j}from"./index.QHQq_OEs.js";const l=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function A(e,i){if(typeof e!="string")throw new TypeError("argument str must be a string");const o={},s=(i||{}).decode||P;let a=0;for(;a<e.length;){const r=e.indexOf("=",a);if(r===-1)break;let n=e.indexOf(";",a);if(n===-1)n=e.length;else if(n<r){a=e.lastIndexOf(";",r-1)+1;continue}const f=e.slice(a,r).trim();if(o[f]===void 0){let c=e.slice(r+1,n).trim();c.codePointAt(0)===34&&(c=c.slice(1,-1)),o[f]=I(c,s)}a=n+1}return o}function y(e,i,o){const t=o||{},s=t.encode||D;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!l.test(e))throw new TypeError("argument name is invalid");const a=s(i);if(a&&!l.test(a))throw new TypeError("argument val is invalid");let r=e+"="+a;if(t.maxAge!==void 0&&t.maxAge!==null){const n=t.maxAge-0;if(Number.isNaN(n)||!Number.isFinite(n))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(n)}if(t.domain){if(!l.test(t.domain))throw new TypeError("option domain is invalid");r+="; Domain="+t.domain}if(t.path){if(!l.test(t.path))throw new TypeError("option path is invalid");r+="; Path="+t.path}if(t.expires){if(!O(t.expires)||Number.isNaN(t.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(r+="; HttpOnly"),t.secure&&(r+="; Secure"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():t.priority){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}function O(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function I(e,i){try{return i(e)}catch{return e}}function P(e){return e.includes("%")?decodeURIComponent(e):e}function D(e){return encodeURIComponent(e)}function u(e){if(typeof e!="object")return e;var i,o,t=Object.prototype.toString.call(e);if(t==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){o=new e.constructor;for(i in e)e.hasOwnProperty(i)&&o[i]!==e[i]&&(o[i]=u(e[i]))}else{o={};for(i in e)i==="__proto__"?Object.defineProperty(o,i,{value:u(e[i]),configurable:!0,enumerable:!0,writable:!0}):o[i]=u(e[i])}return o}if(t==="[object Array]"){for(i=e.length,o=Array(i);i--;)o[i]=u(e[i]);return o}return t==="[object Set]"?(o=new Set,e.forEach(function(s){o.add(u(s))}),o):t==="[object Map]"?(o=new Map,e.forEach(function(s,a){o.set(u(a),u(s))}),o):t==="[object Date]"?new Date(+e):t==="[object RegExp]"?(o=new RegExp(e.source,e.flags),o.lastIndex=e.lastIndex,o):t==="[object DataView]"?new e.constructor(u(e.buffer)):t==="[object ArrayBuffer]"?e.slice(0):t.slice(-6)==="Array]"?new e.constructor(e):e}const R={path:"/",watch:!0,decode:e=>C(decodeURIComponent(e)),encode:e=>encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))};function w(e,i){var f;const o={...R,...i},t=x(o)||{};let s;o.maxAge!==void 0?s=o.maxAge*1e3:o.expires&&(s=o.expires.getTime()-Date.now());const a=s!==void 0&&s<=0,r=u(a?void 0:t[e]??((f=o.default)==null?void 0:f.call(o))),n=s&&!a?L(r,s):k(r);{const c=typeof BroadcastChannel>"u"?null:new BroadcastChannel(`nuxt:cookies:${e}`),d=()=>{o.readonly||j(n.value,t[e])||(M(e,n.value,o),c==null||c.postMessage(o.encode(n.value)))};let p=!1;h()&&v(()=>{p=!0,d(),c==null||c.close()}),c&&(c.onmessage=b=>{p=!0,t[e]=n.value=o.decode(b.data),S(()=>{p=!1})}),o.watch?T(n,()=>{p||d()},{deep:o.watch!=="shallow"}):d()}return n}function x(e={}){return A(document.cookie,e)}function N(e,i,o={}){return i==null?y(e,i,{...o,maxAge:-1}):y(e,i,o)}function M(e,i,o={}){document.cookie=N(e,i,o)}const g=2147483647;function L(e,i){let o,t=0;return h()&&v(()=>{clearTimeout(o)}),E((s,a)=>{function r(){clearTimeout(o);const n=i-t,f=n<g?n:g;o=setTimeout(()=>{if(t+=f,t<i)return r();e=void 0,a()},f)}return{get(){return s(),e},set(n){r(),e=n,a()}}})}const q=()=>({isEnabled:()=>{const t=m().query;return Object.prototype.hasOwnProperty.call(t,"preview")&&!t.preview?!1:!!(t.preview||w("previewToken").value||sessionStorage.getItem("previewToken"))},getPreviewToken:()=>w("previewToken").value||sessionStorage.getItem("previewToken")||void 0,setPreviewToken:t=>{w("previewToken").value=t,m().query.preview=t||"",t?sessionStorage.setItem("previewToken",t):sessionStorage.removeItem("previewToken"),window.location.reload()}});export{q as u};
